---
- name: copy swapped keymap
  become: true
  copy: "src=swapped.kmap.gz dest={{keymaps_dir}}/"
  tags:
    - console

- name: set system keymap
  become: true
  lineinfile:
    dest: "{{system_console_conf}}"
    line: KEYMAP=swapped
    regexp: "^[\\s]*KEYMAP"
    state: present

- name: setup inputrc
  become: "{{env == 'desktop'}}"
  lineinfile:
    dest: "{{inputrc}}"
    line: "{{item}}"
    create: true
    state: present
  with_items:
  - "\"\e[A\": history-search-backward"
  - "\"\e[B\": history-search-forward"
  - set show-all-if-ambiguous on
  - set completion-ignore-case on
